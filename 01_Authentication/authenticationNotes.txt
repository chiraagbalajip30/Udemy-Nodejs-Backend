Video - 56
-----------
Understanding Authorization vs Authentication with Real-World Examples



Authentication:

It means "who are you?".


Authorization:

It is the next step of Authentication. 

The main challenge lies in Authentication. If this is surpassed, then Authorization becomes easyas it is just a check. 

----------------------------------------------


Video - 57
-----------
What is Authentication? A Story-Based Introduction to Login Systems.


We will understand Authentication with a story.

We will take a parking lot. Let us say it is a paid and reserved service taken by some xyz company for their own purpose.
They have a security guard. No one have access to park the car there(random people). 
Now let us say, it is a vallet parking. Now, the owner comes and parks the car. Before parking, the security guard comes and takes the car, and he parks the car in the empty space. Then he gives a token by mentioning your car name so that you can show this card to take back your car when you want to. 
Security guard has a diary,and he stores the car number belomgs to so and so token number. 
Once the owner comes back, he will give the token number, security guard opens the diary and checks if the token number matches the car number, and he then parks the car outside and handovers the key to the owner. 
The main thing is that token is being issued here. 
There also might be a probelm. Let  us say, there will be 200 cars. If there is one security guard, he will be tired, and must look at the cars one by one, and the 200 people have to wait in the long queue. 
So, what i can do is increase the resource that is, security guards. So i will make three lines, and divide the traffic into three lines parallely. Now, the speed is faster as well. 
There is a problem as well in this approach. There is only one diary. When one security guard is writing down in that diary, the others in the queue have to wait. 
So, now we will increase the numbewr of diaries. Now we think everything is good. 
But there is a problem. If a car goes to one security guard and gets his vehickle number entered in one diary, and when he comes back if he goes to the another security guard, he won't be having that token in his diary. 
Next idea is one security guard with multiple diaries. Pro is the above problem is solved that is, customers must come to the same security guard, and no need of remembering to whom they gave the cvar. COns is one security guard casnnot hasndle the queue, while other security guards will be idling sitting with no queue. 
SO, three approaches are done. Both have their own pros and cons.


The same happens in the authentication of server sas well. 
First we will try, One server, One state(tokens). So we will end up in case-1 problem. The same for other cases.
This was just an example. 
In the next video, we will try all the cases, and then come too the final correct option which will be shown in the next video.

Chatgpt:
---------
load balancer is a system that distributes incoming traffic across multiple servers so no single server gets overwhelmed.

ðŸ”„ What It Does

When users visit your website:

The request first goes to the load balancer

The load balancer chooses a server

It forwards the request to that server

The server responds to the user



ðŸŽ¯ Why Itâ€™s Important
âœ… Prevents Overload

Spreads traffic evenly so no single server crashes.

âœ… High Availability

If one server fails, traffic is automatically sent to healthy servers.

âœ… Improves Performance

Users experience faster response times.

âœ… Enables Horizontal Scaling

Essential when running multiple servers.



ðŸ§  How It Decides Where to Send Traffic

Common algorithms:

Round Robin â†’ Takes turns between servers

Least Connections â†’ Sends traffic to the least busy server

IP Hash â†’ Same user goes to the same server

Weighted Distribution â†’ More powerful servers get more traffic



ðŸ— Types of Load Balancers
1ï¸âƒ£ Hardware Load Balancers

Physical devices in data centers.

2ï¸âƒ£ Software Load Balancers

Run as applications or services.

Examples:

NGINX

HAProxy

Apache HTTP Server

3ï¸âƒ£ Cloud Load Balancers

Managed services from cloud providers:

Amazon Web Services Elastic Load Balancer

Google Cloud Load Balancing

Microsoft Azure Load Balancer



ðŸ¢ Simple Real-World Analogy

Imagine a restaurant host:

Customers walk in

The host assigns them to available tables

If one waiter is busy, customers go to another

The host = load balancer
The waiters = servers



-----------------------------------------------


Video - 58
-----------
Implementing Session-Based Authentication in Node.js Applications


So, I will write down the cases, and we will follow step by step and improve step by step.

1. 1 Security Guard = 1 Diary (Tokens)
2. 4 Security Guards = 1 Diary (Tokens)
3. 4 Security Guards = 4 Diary (TOkens)
4. How can we make it fully optimise for real-world purpose.


So, I had written this above notes or content in bookStoreDockerNotes.txt file. Now, I have created a folder named 01_Authentication, and created a text file named authenticationNotes.txt, and am writing everything inside this.



npm i @types/node installs TypeScript type definitions for Node.js.

Letâ€™s break it down ðŸ‘‡

ðŸ§  What it actually does

When you write code in TypeScript, it needs to know the types of built-in Node objects like:

process

fs

path

http

__dirname

Buffer

require

TypeScript does NOT know these by default.

ðŸ‘‰ @types/node provides type definitions so TypeScript understands Node APIs.




npm i @types/node installs TypeScript type definitions for Node.js.

Letâ€™s break it down ðŸ‘‡

ðŸ§  What it actually does

When you write code in TypeScript, it needs to know the types of built-in Node objects like:

process

fs

path

http

__dirname

Buffer

require

TypeScript does NOT know these by default.

ðŸ‘‰ @types/node provides type definitions so TypeScript understands Node APIs.



Course Content:
-------------------

As this is a new foler, we need to do some installations.
1. npm init - Got our package.json file.
2. npm i express@4.x - express version 4 is suitable and good with no bugs.
3. npm i @types/node @types/express@4.x -D  -  types/node for typings, and -D for storing these in dev dependencies. 


Now, we will create an index.js file. 

----------
"First Approach Example" - 1 Security Guard = 1 Diary (Tokens). 
----------------------

Inside this file, let us export express, assign a port and we will listen to the port.

Now let us create some routes. As a part of Authentication, we need a login route. Also, we will create a sign up route.  Then we will create a me route which recognises us on the server. 

We will create a signup route. This means, "hey here is my car, Please park it and give me back a token". 

Now we destructure or extract few details from the frontend that si the req.body which are email, anme and password. 
Email - unique car Number.

Now we will also use Middleware that is app.use(express.json());.

ðŸ§  What app.use(express.json()) actually does

ðŸ‘‰ It is middleware that parses incoming request bodies
ðŸ‘‰ Specifically, it parses JSON data sent by the client

It converts:

âœ… Raw JSON string (from HTTP request body)
âž¡ï¸ Into
âœ… JavaScript object (req.body)

It takes care of only request part, and the response part will be converted back to json usiong "res,json()" method.



Now we will create a Diary. 

In the route, we will check if eail which has been entered is already taken. If yes it sends 400. Else, we have to create a toke. Usually tokens will be in the form of ids. But for now, we will create some random date thing. 

 DIARY[token] = { name, email, password }; - This means, hey in this diary, in this partiular token, create or sya this is your name, email and password. 

 me route means i will tell you who are ytou to take back your car. 


 http://localhost:8000/signup/

 Response when i click send or post for the first time:

 {
  "status": "success",
  "token": "1772012565790"
}


WHen i try to store the same email again that is, when i click end again:

{
  "error": "Email already taken"
}


When you sewnd or post the request for the link  http://localhost:8000/me  by entering the token of the created signup user, you get:

{
  "data": {
    "name": "MCB1",
    "email": "mcb1@gmail.com",
    "password": "1234567"
  }
}



Now let's say we want to access some private data. We will create a route for that.
What trhis route tells is that the info must be available only to the person that has logged in. 



const express = require("express");

const app = express();

const PORT = 8000;

app.use(express.json());

const DIARY = {};
const EMAILS = new Set();

// Hey, Here is my car - Please park it and give me back a token
// Email => Unique Car Number

app.post("/signup", (req, res) => {
  const { name, email, password } = req.body;

  if (EMAILS.has(email)) {
    return res.status(400).json({ error: "Email already taken" });
  }
  // Create a Token for User
  const token = `${Date.now()}`;

  // Do a entry in Diary
  DIARY[token] = { name, email, password };
  EMAILS.add(email);

  // user must come back with this tokeneverytime
  return res.json({ status: "success", token });
});

app.post("/me", (req, res) => {
  const { token } = req.body;
  if (!token) {
    return res.status(400).json({ error: "Missing Token" });
  }

  if (!(token in DIARY)) {
    return res.status(400).json({ error: "Invalid Token" });
  }

  const entry = DIARY[token];

  return res.json({ data: entry });
});

app.post("/private-data", (req, res) => {
  const { token } = req.body;

  if (!token) {
    return res.status(400).json({ error: "Missing Token" });
  }

  if (!(token in DIARY)) {
    return res.status(400).json({ error: "Invalid Token" });
  }

  const entry = DIARY[token];
  return res.json({ data: { privateData: "Access Granted" } });
});

app.listen(PORT, () => console.log(`Server started on Port ${PORT}`));



This si the first case and is not used in the realworkd because only one server has to be for maintaining tokens as it has both states and diary(db and data). If there are multiple servers, if one server has the diary and state, and if the token is sent to another server, it wouldn't know whta to do with the request.
So, it is notscalabale. 
This was the "First Approach Example" - 1 Security Guard = 1 Diary (Tokens). 


------------------
"2nd Approach Example Below" - 4 Security Guard = 1 Diary(Tokens).
-------------------

For this we will create a db where diary will be moved in here. 



-------------------
"3rd Approach Example" - 4 Security Gaurds = 4 Diaries(Tokens).
----------------

Session-Based Authentication is the term that can be coined for these all. Here token acts as a temporary data or token stored until the session, and it can be removed whenever required(suppose if the person logged in is a scammer, we can just remove that particular login token, so he cannot login again). Server is Stateful here(diary). 
This is best for Short-Lived sessions. Example: Banking Website, where yopu are allowed to login for few minutes(4-5 mins).
It is called Stateful because the session is maintained by the server. 
But it is bad for Long-Lived Sessions. 


------------------------------
Another Final Approach IG WHich is required
-----------------------

For Long-Lived Sessions, we can use something known as "JSON Web Tokens". These are "Stateless Authentication". 
In the next Video, we are going to code the "End to End Code Session Based Stateful Authentication Systems" first, and then talk about "JSON Web Tokens".


-------------------------------------------

Video - 58
---------------





















